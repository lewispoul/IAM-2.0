# IAM Chemistry File I/O Map

This document describes all chemistry file formats flowing through the IAM system, their producers, storage locations, consumers, and example schema snippets.

---

## 1. SMILES

- **Produced by:**  
  - User input (web GUI, Ketcher sketcher)  
  - External datasets (CSV import)  
- **Stored:**  
  - In-memory (web app, backend)  
  - Sometimes saved to results CSV/JSON for audit  
- **Read by:**  
  - `IAM_Molecule_Engine` (`generate_xyz_from_smiles`)  
  - `IAM_GUI/static/inputs.js`  
- **Schema snippet:**  
  ```text
  CCO                    # ethanol
  C1=CC=CC=C1           # benzene
  C[C@H](N)C(=O)O       # alanine with stereochemistry
  ```

---

## 2. MOL (V2000/V3000)

- **Produced by:**  
  - Ketcher sketcher (export)  
  - RDKit (backend conversion)  
- **Stored:**  
  - Temporary (clipboard, textarea, or sent via postMessage)  
  - Sometimes in `/tools/xtb/*.mol` test files  
- **Read by:**  
  - `IAM_Molecule_Engine`  
  - `/molfile_to_xyz` backend route  
- **Schema snippet:**  
  ```text
  
    Ketcher 03152310132D 1   1.00000     0.00000     0
  
    7  6  0     0  0            999 V2000
      1.0000    0.0000    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0
      2.0000    0.0000    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0
    1  2  1  0     0  0
  M  END
  ```

---

## 3. XYZ

- **Produced by:**  
  - RDKit (`generate_xyz_from_smiles`, `/molfile_to_xyz`)  
  - XTB optimizer (output)  
- **Stored:**  
  - `/tools/xtb/*.xyz`  
  - Temporary files for quantum calculations  
- **Read by:**  
  - XTB wrapper  
  - `IAM_GUI/static/viewer.js` (for 3Dmol.js)  
- **Schema snippet:**  
  ```text
  7
  energy: -123.456789
  C         0.00000        0.00000        0.00000
  C         1.54000        0.00000        0.00000
  H         2.16000        0.88000        0.00000
  H         2.16000       -0.88000        0.00000
  H        -0.51000        0.88000        0.00000
  H        -0.51000       -0.88000        0.00000
  H        -0.51000        0.00000        0.88000
  ```

---

## 4. CUBE

- **Produced by:**  
  - Quantum chemistry backends (Psi4, XTB) for orbitals, electron density  
- **Stored:**  
  - `/notebooks/results/*.cube`  
  - Temporary for visualization  
- **Read by:**  
  - 3Dmol.js viewer  
  - Cube file parsers in backend  
- **Schema snippet:**  
  ```text
  HOMO orbital
  Generated by Psi4
      7    0.000000    0.000000    0.000000
     40   -0.200000    0.000000    0.000000
     40    0.000000   -0.200000    0.000000
     40    0.000000    0.000000   -0.200000
      6    6.000000   -2.000000   -1.000000    0.000000
  -0.123456E-03  0.234567E-02 -0.345678E-01  0.456789E+00
  ```

---

## 5. LOG

- **Produced by:**  
  - XTB (`xtb_output/xtb_output.log`)  
  - Psi4, Gaussian (not shown in top results, but typical)  
- **Stored:**  
  - `/xtb_output/*.log`  
  - `/notebooks/results/*.log`  
- **Read by:**  
  - XTB/Psi4 log parsers (`parse_xtb_output`, etc.)  
  - Performance/benchmark modules  
- **Schema snippet:**  
  ```text
         ==============================================
         |                                            |
         |                 x T B                      |
         |                                            |
         ==============================================
  
       * xtb version 6.4.1 (8d0f1dd) compiled by 'conda@1efc2f854142' on 2021-08-09
  
       xtb path: /opt/conda/bin/xtb
       Hostname: localhost
       pid: 12345
  
       TOTAL ENERGY          =      -4.234567 Eh
       HOMO-LUMO GAP         =       8.765432 eV
  ```

---

## 6. JSON Results

- **Produced by:**  
  - Backend endpoints (`/run_xtb`, `/run_psi4`, `/predict`, etc.)  
  - Benchmarking modules  
- **Stored:**  
  - `/IAM_Knowledge/*.json`  
  - Dashboard status files  
- **Read by:**  
  - Frontend for rendering results  
  - Performance summary modules  
- **Schema snippet:**  
  ```json
  {
    "success": true,
    "timestamp": "2023-03-15T14:30:00Z",
    "energy": -123.456789,
    "homo_lumo_gap": 8.765,
    "dipole_moment": [0.123, -0.456, 0.789],
    "optimization_steps": 25,
    "convergence": true
  }
  ```

---

## 7. CSV Benchmarks

- **Produced by:**  
  - Benchmark modules (`IAM_BenchmarkTool.py`, IAM Agent)  
  - Literature parsing (Klap√∂tke, Agrawal, etc.)  
- **Stored:**  
  - `/IAM_Knowledge/*.csv`  
  - `/benchmarks/*.csv`  
- **Read by:**  
  - Benchmark tools  
  - Data analysis scripts/notebooks  
- **Schema snippet:**  
  ```csv
  compound_name,smiles,experimental_density,calculated_density,detonation_velocity,detonation_pressure
  TNT,c1cc(c(cc1[N+](=O)[O-])[N+](=O)[O-])[N+](=O)[O-],1.654,1.652,6900,190000
  RDX,C1N([N+](=O)[O-])CN([N+](=O)[O-])CN1[N+](=O)[O-],1.806,1.804,8750,347000
  HMX,C1N(C[N+]([O-])=O)N([N+]([O-])=O)CN([N+]([O-])=O)N1[N+]([O-])=O,1.905,1.903,9100,393000
  ```

---

## Summary Table

| Format     | Produced by           | Stored               | Read by                | Example Schema         |
|------------|----------------------|----------------------|------------------------|-----------------------|
| SMILES     | User, CSV import     | In-memory, CSV       | RDKit, Ketcher, Engine | `C1=CC=CC=C1`         |
| MOL        | Ketcher, RDKit       | Temp, /tools/xtb     | RDKit, Engine, Backend | V2000/V3000 format    |
| XYZ        | RDKit, XTB           | /tools/xtb, temp     | XTB, 3Dmol.js viewer   | Cartesian coordinates |
| CUBE       | Psi4, XTB            | /notebooks/results   | 3Dmol.js, parsers      | Volumetric data       |
| LOG        | XTB, Psi4            | /xtb_output, results | Log parsers, benchmarks| Text output logs      |
| JSON       | Backend endpoints    | /IAM_Knowledge       | Frontend, performance  | Structured results    |
| CSV        | Benchmark tools      | /benchmarks          | Analysis scripts       | Tabular data          |

---

**Results may be incomplete due to search limits.**
